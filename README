# ğŸ¬ Movie Review API

En komplett backend fÃ¶r en webbapplikation dÃ¤r anvÃ¤ndare kan registrera sig, logga in och lÃ¤mna recensioner pÃ¥ filmer. AdministratÃ¶rer kan dessutom hantera anvÃ¤ndare genom att ge admin-rÃ¤ttigheter, banna konton, och ta bort anvÃ¤ndare.

Byggt med **Node.js**, **Express**, **MongoDB** och **Mongoose**.

---

## ğŸ“¦ Funktionalitet

- ğŸ§‘ AnvÃ¤ndarregistrering & inloggning med sÃ¤kra lÃ¶senord (bcrypt + JWT)
- âœï¸ AnvÃ¤ndare kan lÃ¤mna recensioner pÃ¥ filmer
- ğŸ¥ CRUD fÃ¶r filmer
- â­ CRUD fÃ¶r recensioner
- ğŸ” Roll-baserad autentisering (Admin/AnvÃ¤ndare)
- ğŸ›¡ï¸ Adminfunktioner: ge admin-rÃ¤ttigheter, banna anvÃ¤ndare, ta bort konton

---

## ğŸ§© Mongoose-modeller

### `User`
| FÃ¤lt      | Typ     | Beskrivning                    |
|-----------|---------|--------------------------------|
| username  | String  | AnvÃ¤ndarnamn                   |
| email     | String  | E-postadress                   |
| password  | String  | Hashed lÃ¶senord                |
| role      | String  | "User" eller "Admin" (default) |
| status    | String  | pending, active, banned        |

---

### `Movie`
| FÃ¤lt         | Typ    | Beskrivning          |
|--------------|--------|----------------------|
| title        | String | Filmtitel            |
| director     | String | RegissÃ¶r             |
| releaseYear  | Number | UtgivningsÃ¥r         |
| genre        | String | Genre                |

---

### `Review`
| FÃ¤lt     | Typ      | Beskrivning                            |
|----------|----------|----------------------------------------|
| movieId  | ObjectId | Referens till en `Movie`               |
| userId   | ObjectId | Referens till en `User`                |
| rating   | Number   | Betyg (1â€“5)                            |
| comment  | String   | Recensionstext                         |
| createdAt| Date     | Skapad datum (automatiskt genererat)   |

---

## ğŸ§ª API-endpoints

### ğŸ” Autentisering
| Metod | Endpoint      | Beskrivning                    |
|-------|---------------|---------------------------------|
| POST  | `/register`   | Registrera en ny anvÃ¤ndare     |
| POST  | `/login`      | Logga in och fÃ¥ en JWT-token   |

---

### ğŸ¬ Filmer
| Metod | Endpoint            | Beskrivning                      |
|-------|---------------------|----------------------------------|
| POST  | `/movies`           | LÃ¤gg till en ny film             |
| GET   | `/movies`           | HÃ¤mta alla filmer                |
| GET   | `/movies/:id`       | HÃ¤mta en specifik film           |
| PUT   | `/movies/:id`       | Uppdatera en specifik film       |
| DELETE| `/movies/:id`       | Ta bort en specifik film         |
| GET   | `/movies/:id/reviews` | HÃ¤mta alla recensioner fÃ¶r en film |

---

### âœï¸ Recensioner
| Metod | Endpoint        | Beskrivning                      |
|-------|-----------------|----------------------------------|
| POST  | `/reviews`      | LÃ¤gg till en recension           |
| GET   | `/reviews`      | HÃ¤mta alla recensioner           |
| GET   | `/reviews/:id`  | HÃ¤mta en specifik recension      |
| PUT   | `/reviews/:id`  | Uppdatera en specifik recension  |
| DELETE| `/reviews/:id`  | Ta bort en specifik recension    |

---

### ğŸ‘‘ Adminfunktioner
| Metod | Endpoint             | BehÃ¶righet | Beskrivning                        |
|-------|----------------------|------------|------------------------------------|
| POST  | `/banuser/:_id`      | Admin      | Banna en anvÃ¤ndare                 |
| POST  | `/makeadmin/:id`     | Admin      | Ge en anvÃ¤ndare admin-rÃ¤ttigheter  |
| DELETE| `/deleteuser/:id`    | Admin      | Ta bort en anvÃ¤ndare permanent     |

---

## ğŸ›¡ï¸ SÃ¤kerhet

- Hashning med `bcrypt` fÃ¶r lÃ¶senord
- JWT-token fÃ¶r autentisering
- Middleware fÃ¶r att skydda admin-only endpoints
- Statushantering av konton (pending, active, banned)

---

## âš™ï¸ Teknologier

- **Node.js** + **Express**
- **MongoDB** + **Mongoose**
- **JWT** fÃ¶r autentisering
- **bcrypt** fÃ¶r lÃ¶senord
- **dotenv** fÃ¶r miljÃ¶variabler

